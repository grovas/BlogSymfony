{% extends 'base.html.twig' %}

{% block body %}
	{{ dump(app.user.roles) }}
	{% if is_granted('ROLE_ADMIN') %}
		<h1>hello {{ user.username }}</h1>
		<table class="table">
			<tbody>
			<tr>
				<th>Nazwa użytkownika </th>
			</tr>
			{% for u in users %}
				<tr>
					<td>
						<a href="{{ path('admin_panel', {'id': u.id}) }}">
							{{ u.username }}
						</a>
					</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
	{% endif %}

	{% if notToday == false %}
		<a href="{{ path('post_new_index') }}">Nowy wpis</a><br/>
	{% endif %}

	<a href="{{ path('user_edit') }}">Edycja danych blogera</a><br/>
	<a href="{{ path('logout') }}">Wyloguj</a><br/>
	<table class="table">
		<tbody>
			<tr>
				<th>Numer </th>
				<th>Data utworzenia </th>
				<th>Tytuł </th>
				<th>Post</th>
				<th>Załącznik</th>
				<th>User</th>
			</tr>
			{% for post in posts %}
				<tr>
					<td>
						{{ post.id }}
					</td>
					<td>
						{{ post.date|date('Y-m-d') }}
					</td>
					<td>
						<a href="{{ path('post_view_index', {'id': post.id}) }}">
						{{ post.title }}
						</a>
					</td>
					<td>
						{{ post.body }}
					</td>
					<td>
						<a href="{{ asset('uploads/attachments/' ~ post.attachment) }}">
							{{ post.attaOriginName }}</a>
						<a href="">Usuń załącznik</a>
					</td>>
					<td>
						{{ user.getUsername }}
					</td>
					<td>
						<a href="{{ path('post_edit_index', {'id': post.id}) }}">
							Edycja posta
						</a>
					</td>
					<td>
						<a href="{{ path('post_delete_index', {'id': post.id}) }}">
							Usunięcie posta
						</a>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
{% endblock %}